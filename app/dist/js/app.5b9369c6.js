(function(t){function n(n){for(var e,r,c=n[0],a=n[1],u=n[2],h=0,p=[];h<c.length;h++)r=c[h],s[r]&&p.push(s[r][0]),s[r]=0;for(e in a)Object.prototype.hasOwnProperty.call(a,e)&&(t[e]=a[e]);l&&l(n);while(p.length)p.shift()();return i.push.apply(i,u||[]),o()}function o(){for(var t,n=0;n<i.length;n++){for(var o=i[n],e=!0,c=1;c<o.length;c++){var a=o[c];0!==s[a]&&(e=!1)}e&&(i.splice(n--,1),t=r(r.s=o[0]))}return t}var e={},s={app:0},i=[];function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=e,r.d=function(t,n,o){r.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:o})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,n){if(1&n&&(t=r(t)),8&n)return t;if(4&n&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var e in t)r.d(o,e,function(n){return t[n]}.bind(null,e));return o},r.n=function(t){var n=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(n,"a",n),n},r.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},r.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],a=c.push.bind(c);c.push=n,c=c.slice();for(var u=0;u<c.length;u++)n(c[u]);var l=a;i.push([0,"chunk-vendors"]),o()})({0:function(t,n,o){t.exports=o("56d7")},"034f":function(t,n,o){"use strict";var e=o("c21b"),s=o.n(e);s.a},"0e25":function(t,n,o){},"56d7":function(t,n,o){"use strict";o.r(n);o("cadf"),o("551c"),o("097d");var e=o("ba4c"),s=o.n(e),i=o("8c4f"),r=o("bc3a"),c=o.n(r),a=function(){var t=this,n=t.$createElement,o=t._self._c||n;return o("div",{attrs:{id:"app"}},[o("router-view")],1)},u=[],l={name:"app",components:{}},h=l,p=(o("034f"),o("2877")),f=Object(p["a"])(h,a,u,!1,null,null,null);f.options.__file="App.vue";var _=f.exports,v=function(){var t=this,n=t.$createElement,o=t._self._c||n;return o("div",[t._v("\n    I am index\n    "),o("button",{on:{click:t.start}},[t._v("点我开始")])])},d=[],m={data:function(){return{}},methods:{start:function(){this.$router.push("game")}}},w=m,g=Object(p["a"])(w,v,d,!1,null,null,null);g.options.__file="Index.vue";var b=g.exports,k=function(){var t=this,n=t.$createElement,o=t._self._c||n;return o("div",{staticClass:"game"},[1===t.win_status?o("div",{staticClass:"win"},[o("p",{staticClass:"win_p"},[t._v("\n            You win\n            "),o("span",{on:{click:t.rewStart}},[t._v("再战一局")])])]):t._e(),2===t.win_status?o("div",{staticClass:"lose"},[o("p",{staticClass:"lose_p"},[t._v("\n            You lose\n            "),o("span",{on:{click:t.rewStart}},[t._v("再战一局")])])]):t._e(),o("div",{staticClass:"container"},[o("div",{staticClass:"left-right"},t._l(t.nums,function(n){return o("span",[t._v(t._s(n))])})),o("div",{staticClass:"two"},[o("div",{staticClass:"top-down"},t._l(t.nums,function(n){return o("span",[t._v(t._s(n))])})),o("table",t._l(t.lines,function(n){return o("tr",t._l(n,function(t){return o("td")}))}))]),o("div",{staticClass:"points"},t._l(t.points,function(n,e){return o("div",t._l(n,function(n,s){return o("go",{attrs:{type:n},on:{click:function(n){t.goClick(e,s,n)}}})}))})),o("div",{staticClass:"info-panel"},[o("div",{staticClass:"info-top"},[o("span",[t._v("房间号")]),o("span",[t._v(t._s(t.room_id))]),o("p",[o("span",[t._v("当前:")]),o("go",{attrs:{type:t.color}})],1),o("p",[o("span",[t._v("战绩:")]),o("span",[t._v(t._s(t.win_count)+" / "+t._s(t.total_count))])])]),o("div",{staticClass:"info-bottom"},t._l(t.messages,function(n){return o("p",[t._v(t._s(n))])}))])]),o("div",{directives:[{name:"show",rawName:"v-show",value:t.show_cover,expression:"show_cover"}],staticClass:"cover"}),o("div",{directives:[{name:"show",rawName:"v-show",value:t.show_cover,expression:"show_cover"}],staticClass:"enter"},[o("button",{on:{click:t.createRoom}},[t._v("创建房间")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.room_id,expression:"room_id"}],attrs:{type:"number",placeholder:"请输入房间号"},domProps:{value:t.room_id},on:{keyup:function(n){return"button"in n||!t._k(n.keyCode,"enter",13,n.key,"Enter")?t.joinRoom(n):null},input:function(n){n.target.composing||(t.room_id=n.target.value)}}}),o("button",{on:{click:t.joinRoom}},[t._v("加入房间")])])])},y=[],x=function(){var t=this,n=t.$createElement,o=t._self._c||n;return o("div",{staticClass:"go",on:{click:t.change}},[o("div",{staticClass:"point",class:t.random[t.m_type]})])},j=[],C={props:["type"],data:function(){return{m_type:0,random:["","black","white","black-hover","white-hover"]}},watch:{type:function(t,n){this.m_type=t}},methods:{change:function(){this.m_type>2&&(this.m_type-=2,this.$emit("click",this.m_type))}},mounted:function(){this.m_type=this.type}},O=C,S=(o("c89c"),Object(p["a"])(O,x,j,!1,null,null,null));S.options.__file="Go.vue";var N=S.exports,$="api.congnannan.com",P={components:{go:N},data:function(){return{lines:[],nums:[],points:[],socket:null,show_cover:!0,room_id:"",color:1,current_color:1,win_status:0,win_count:0,total_count:0,messages:[]}},methods:{back:function(){this.$router.push("index")},initLines:function(){for(var t=0;t<14;t++){for(var n=[],o=0;o<14;o++)n.push(o);this.lines.push(n)}for(t=1;t<16;t++)this.nums.push(t);this.initPoints()},initPoints:function(){for(var t=[],n=0;n<15;n++){for(var o=[],e=0;e<15;e++)o.push(0);t.push(o)}this.points=t},goClick:function(t,n,o){this.socket.send(JSON.stringify({option:"step",i:t,j:n,color:o}))},rewStart:function(){this.socket.send(JSON.stringify({option:"renew"}))},handleMessage:function(t){var n=JSON.parse(t.data);switch(console.log(n),n.option){case"join":this.whenJoin(n);break;case"new":this.whenNewGame(n);break;case"step":this.whenStep(n);break;case"win":this.win_status=1,this.win_count++,this.total_count++,this.finish();break;case"lose":this.win_status=2,this.total_count++,this.finish();break}},whenJoin:function(t){this.room_id=t.room_id,this.show_cover=!1,this.new_game(),this.messages.push("开始对局")},whenNextTurn:function(){for(var t=0;t<15;t++)for(var n=0;n<15;n++)1!==this.points[t][n]&&2!==this.points[t][n]&&(this.current_color===this.color?this.$set(this.points[t],n,this.color+2):this.$set(this.points[t],n,0))},finish:function(){this.current_color=3-this.color,this.whenNextTurn()},whenNewGame:function(t){this.win_status=0,this.color=t.color,this.current_color=t.current_color,this.initPoints(),this.whenNextTurn()},whenStep:function(t){this.$set(this.points[t.i],t.j,t.color),this.current_color=t.current_color;var n=["黑","白"];this.current_color===this.color?this.messages.push("对方："+n[t.color-1]+"("+(t.i+1)+"."+(t.j+1)+")"):this.messages.push("己方："+n[t.color-1]+"("+(t.i+1)+"."+(t.j+1)+")"),this.whenNextTurn()},connent:function(){var t="ws://"+$+"/game";this.socket=new WebSocket(t),this.socket.onopen=function(t){console.log(t)},this.socket.onmessage=this.handleMessage,this.socket.onclose=function(t){console.log(t)},this.socket.onerror=function(t){console.log(t)}},createRoom:function(){var t=this;axios.post("http://"+$+"/new_room").then(function(n){var o=n.data;t.room_id=o.room_id,console.log(t.room_id),t.joinRoom()}).catch(function(t){console.error(t)})},joinRoom:function(){this.socket.send(JSON.stringify({option:"join",room_id:this.room_id}))},new_game:function(){this.socket.send(JSON.stringify({option:"new"}))}},mounted:function(){this.initLines(),this.connent()},watch:{messages:function(){setTimeout(function(){var t=document.getElementsByClassName("info-bottom")[0];t.scrollTop=t.scrollHeight},100)}}},J=P,T=(o("bb9a"),Object(p["a"])(J,k,y,!1,null,null,null));T.options.__file="Game.vue";var E=T.exports;s.a.use(i["a"]),s.a.config.productionTip=!1,window.axios=c.a;var M=new i["a"]({routes:[{path:"/index",component:b},{path:"/",component:E}]});new s.a({router:M,render:function(t){return t(_)}}).$mount("#app")},"899a":function(t,n,o){},bb9a:function(t,n,o){"use strict";var e=o("0e25"),s=o.n(e);s.a},c21b:function(t,n,o){},c89c:function(t,n,o){"use strict";var e=o("899a"),s=o.n(e);s.a}});
//# sourceMappingURL=app.5b9369c6.js.map